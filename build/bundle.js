/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./js/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./js/AssetManager.js":
/*!****************************!*\
  !*** ./js/AssetManager.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Stores the path to all game assets\n */\nexports.default = {\n    assets: {\n        images: {\n            'skierCrash': 'img/skier_crash.png',\n            'skierLeft': 'img/skier_left.png',\n            'skierLeftDown': 'img/skier_left_down.png',\n            'skierDown': 'img/skier_down.png',\n            'skierRightDown': 'img/skier_right_down.png',\n            'skierRight': 'img/skier_right.png',\n            'skierJump1': 'img/skier_jump_1.png',\n            'skierJump2': 'img/skier_jump_2.png',\n            'skierJump3': 'img/skier_jump_3.png',\n            'skierJump4': 'img/skier_jump_4.png',\n            'skierJump5': 'img/skier_jump_5.png',\n            'rhinoDefault': 'img/rhino_default.png',\n            'rhinoLiftEat1': 'img/rhino_lift_eat_1.png',\n            'rhinoLiftEat2': 'img/rhino_lift_eat_2.png',\n            'rhinoLiftEat3': 'img/rhino_lift_eat_3.png',\n            'rhinoLiftEat4': 'img/rhino_lift_eat_4.png',\n            'rhinoLiftMouthOpen': 'img/rhino_lift_mouth_open.png',\n            'rhinoLift': 'img/rhino_lift.png',\n            'rhinoLeft': 'img/rhino_run_left.png',\n            'rhinoLeft2': 'img/rhino_run_left_2.png',\n            'tree': 'img/tree_1.png',\n            'treeCluster': 'img/tree_cluster.png',\n            'rock1': 'img/rock_1.png',\n            'rock2': 'img/rock_2.png'\n        },\n        audio: {}\n    },\n\n    obstacles: {\n        types: ['tree', 'treeCluster', 'rock1', 'rock2', 'ramp']\n    },\n\n    loadedAssets: { images: {}, audio: {} },\n\n    /**\n     * Gets a specific image asset from the assets\n     * @return string\n     */\n    getImageAsset: function getImageAsset(name) {\n        return this.assets.images[name];\n    },\n\n    /**\n     * Gets a specific audio asset from the assets\n     * @return string\n     */\n    getAudioAsset: function getAudioAsset(name) {\n        return this.assets.audio[name];\n    },\n\n    /**\n    * Asynchronously Load each asset from Asset Store \n    * @return {Promise}\n    */\n    loadAssets: function loadAssets() {\n        var assetPromises = [];\n\n        var count = this.assets.images.length + this.assets.audio.length;\n\n        var loaded = 0;\n\n        var context = this;\n\n        // load images\n        _.each(this.assets.images, function (asset, assetName) {\n\n            var assetImage = new Image();\n            var assetDeferred = new $.Deferred();\n\n            var that = context;\n            assetImage.onload = function () {\n                assetImage.width /= 2;\n                assetImage.height /= 2;\n                that.loadedAssets.images[assetName] = assetImage;\n                assetDeferred.resolve();\n            };\n            assetImage.src = asset;\n            loaded++;\n            assetPromises.push(assetDeferred.promise());\n        });\n\n        if (this.assets.audio.length > 0) {\n            // load the audio too\n            _.each(this.assets.audio, function (asset, assetName) {\n\n                var assetAudio = new Audio();\n                var assetDeferred = new $.Deferred();\n\n                var that = context;\n                assetAudio.onload = function () {\n                    that.loadedAssets.audio[assetName] = assetAudio;\n                    assetDeferred.resolve();\n                };\n                assetAudio.src = asset;\n                laoded++;\n                assetPromises.push(assetDeferred.promise());\n            });\n        }\n\n        return $.when.apply($, assetPromises);\n    }\n};\n\n//# sourceURL=webpack:///./js/AssetManager.js?");

/***/ }),

/***/ "./js/CollisionDetector.js":
/*!*********************************!*\
  !*** ./js/CollisionDetector.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = __webpack_require__(/*! ./utils */ \"./js/utils.js\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _EventManager = __webpack_require__(/*! ./EventManager */ \"./js/EventManager.js\");\n\nvar _EventManager2 = _interopRequireDefault(_EventManager);\n\nvar _Event = __webpack_require__(/*! ./Event */ \"./js/Event.js\");\n\nvar _Event2 = _interopRequireDefault(_Event);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = {\n    obstacles: {\n        types: ['tree', 'treeCluster', 'rock1', 'rock2']\n    },\n    // keep in memory nearby obstacles\n    nearbyObstacles: [],\n    /**\n     * Checks for collisions between the skier and obstacles\n     * @param {Object} skier\n     * @return void\n    */\n    checkIfSkierHitObstacle: function checkIfSkierHitObstacle(Game, player) {\n        var playerRect = _utils2.default.getCollisionRect(Game, player);\n\n        // filter to nearby obstacles and keep in memory to reduce CPU calc\n        // this.nearbyObstacles = _.filter(Game.obstacles, function(obstacle){\n        //     var distX = player.mapX - obstacle.x, \n        //         distY = player.mapY - obstacle.y;\n        //     return ( distX <= this.radiusOfCollision) && (distY <= this.radiusOfCollision);\n        // });\n\n        // console.log(`Nearby obstacles ${this.nearbyObstacles.length}`);\n\n        //  // sort by nearest obstacles\n        // _.orderBy(this.nearbyObstacles, ['x','y'], ['asc', 'asc']);\n\n        // console.log(this.nearbyObstacles);\n\n        var that = this;\n\n        // iterate and check for collisions\n        var collision = _.find(Game.obstacles, function (obstacle) {\n            var obstacleImage = Game.loadedAssets.images[obstacle.type];\n            var obstacleRect = {\n                left: obstacle.x,\n                right: obstacle.x + obstacleImage.width,\n                top: obstacle.y + obstacleImage.height - 5,\n                bottom: obstacle.y + obstacleImage.height\n            };\n\n            return that.intersectRect(playerRect, obstacleRect);\n        });\n\n        if (collision) {\n            player.direction = 0;\n            player.isMoving = false;\n            player.hasCollided = true;\n            _EventManager2.default.fire(_Event2.default.GAME_OVER);\n        } else {\n            if (player.isMoving) {\n                Game.score += 0.5;\n            }\n        }\n    },\n\n    /**\n     * Check if got to ramp so player can jump or fall\n     */\n    checkIfSkierHitJumpRamp: function checkIfSkierHitJumpRamp(Game, player) {\n        var playerRect = _utils2.default.getCollisionRect(Game, player);\n\n        var that = this;\n\n        var ramps = _.filter(obstacles, function (obstacle) {\n            return obstacle.type === 'ramp';\n        });\n\n        var collision = _.find(ramps, function (ramp) {\n            var obstacleImage = Game.loadedAssets[ramp.type];\n            var obstacleRect = {\n                left: ramp.x,\n                right: ramp.x + obstacleImage.width,\n                top: ramp.y + obstacleImage.height - 5,\n                bottom: ramp.y + obstacleImage.height\n            };\n\n            return that.intersectRect(playerRect, obstacleRect);\n        });\n\n        if (collision) {\n            _EventManager2.default.fire(_Event2.default.FOUND_RAMP);\n        } else {\n            if (player.isMoving) {\n                Game.score += 0.5;\n            }\n        }\n    },\n\n    /**\n     * \n     */\n    checkIfSkierCapturedByEnemy: function checkIfSkierCapturedByEnemy(Game, player, rhino) {\n        var playerRect = _utils2.default.getCollisionRect(Game, player);\n        var rhinoRect = _utils2.default.getCollisionRect(Game, rhino);\n\n        return this.intersectRect(playerRect, rhinoRect);\n    },\n\n    intersectRect: function intersectRect(r1, r2) {\n        return !(r2.left > r1.right || r2.right < r1.left || r2.top > r1.bottom || r2.bottom < r1.top);\n    }\n};\n\n//# sourceURL=webpack:///./js/CollisionDetector.js?");

/***/ }),

/***/ "./js/Event.js":
/*!*********************!*\
  !*** ./js/Event.js ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n// All game events\nexports.default = {\n    START_GAMELOOP: 'START_GAMELOOP',\n    STOP_GAMELOOP: 'STOP_GAMELOOP',\n    SHOW_MENU: 'SHOW_MENU',\n    MENU_PLAY: 'MENU_PLAY',\n    HIDE_MENU: 'HIDE_MENU',\n    GAME_READY: 'GAME_READY',\n    GAME_STARTED: 'GAME_STARTED',\n    GAME_PAUSED: 'GAME_PAUSED',\n    GAME_RESUMED: 'GAME_RESUMED',\n    GAME_OVER: 'GAME_OVER',\n    GAME_QUIT: 'GAME_QUIT',\n    RESET_GAME: 'RESET_GAME',\n    RESET_SKIER: 'RESET_SKIER',\n    RESET_RHINO: 'RESET_RHINO',\n    RESET_STORAGE: 'RESET_STORAGE',\n    FOUND_RAMP: 'FOUND_RAMP',\n    PLAYER_JUMP: 'PLAYER_JUMP',\n    KEY_LEFT: 'KEY_LEFT',\n    KEY_RIGHT: 'KEY_RIGHT',\n    KEY_DOWN: 'KEY_DOWN',\n    KEY_UP: 'KEY_UP'\n};\n\n//# sourceURL=webpack:///./js/Event.js?");

/***/ }),

/***/ "./js/EventManager.js":
/*!****************************!*\
  !*** ./js/EventManager.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/**\n * Manages all evnets in the game\n */\nexports.default = {\n    registeredEventListeners: [],\n    firedEvents: [],\n\n    /**\n     * Registers an event \n     * @param {String} event \n     * @param {Function} handler \n     * @param {Object} target \n     * @returns void\n     */\n    on: function on(event, handler, target) {\n        /**\n         * Apparently I can't get the callee.caller because of webpack's strict mode\n        */\n\n        // if (!target) {\n        //     target = arguments.callee.caller;\n        // }\n        // check if event already exists\n        if (!this.registeredEventListeners[event]) {\n            this.registeredEventListeners[event] = [];\n            //register event\n            this.registeredEventListeners[event].push({ handler: handler, target: target });\n        }\n    },\n\n    /**\n     * Calls/Fires a registered event\n     * @param {String} event \n     */\n    fire: function fire(event) {\n        try {\n            // get all listeners for that event\n            var listeners = this.getListeners(event);\n            // console.log('Event: '+event);\n            // lop through and call them **\n            for (var i = 0; i < listeners.length; i++) {\n                var listener = listeners[i].target;\n                // console.log(\"calling \" + listeners[i].handler);\n                listeners[i].handler.call(listener);\n                // this.firedEvents[event].push({handler: listeners[i].handler, target: listeners[i].target});\n            }\n        } catch (e) {\n            // console.log(\"Event not fired. \"+ e);\n            throw new Error(\"Event not fired\");\n        }\n    },\n\n    /**\n     * \n     * @param {String} event\n     * @returns Array\n     */\n    getListeners: function getListeners(event) {\n        if (!this.registeredEventListeners[event]) {\n            this.registeredEventListeners[event] = [];\n        }\n        return this.registeredEventListeners[event];\n    },\n\n    /**\n     * Reset all trackers for listeners and fired events\n     */\n    reset: function reset() {\n        this.registeredEventListeners = [];\n        this.firedEvents = [];\n    }\n};\n\n//# sourceURL=webpack:///./js/EventManager.js?");

/***/ }),

/***/ "./js/Game.js":
/*!********************!*\
  !*** ./js/Game.js ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Event = __webpack_require__(/*! ./Event */ \"./js/Event.js\");\n\nvar _Event2 = _interopRequireDefault(_Event);\n\nvar _EventManager = __webpack_require__(/*! ./EventManager */ \"./js/EventManager.js\");\n\nvar _EventManager2 = _interopRequireDefault(_EventManager);\n\nvar _AssetManager = __webpack_require__(/*! ./AssetManager */ \"./js/AssetManager.js\");\n\nvar _AssetManager2 = _interopRequireDefault(_AssetManager);\n\nvar _Storage = __webpack_require__(/*! ./Storage */ \"./js/Storage.js\");\n\nvar _Storage2 = _interopRequireDefault(_Storage);\n\nvar _Skier = __webpack_require__(/*! ./Skier */ \"./js/Skier.js\");\n\nvar _Skier2 = _interopRequireDefault(_Skier);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Game = function () {\n    function Game() {\n        _classCallCheck(this, Game);\n\n        this.ctx = null;\n        this.width = window.innerWidth;\n        this.height = window.innerHeight;\n        this.obstacleTypes = ['tree', 'treeCluster', 'rock1', 'rock2'];\n        this.obstacles = [];\n        this.loadedAssets = { images: {}, audio: {} };\n        this.score = 0;\n        this.state = { 'started': false, 'paused': false, 'resumed': false, 'gameOver': false };\n    }\n\n    _createClass(Game, [{\n        key: 'reset',\n        value: function reset() {\n            this.loadedAssets = { images: {}, audio: {} };\n            this.obstacleTypes = ['tree', 'treeCluster', 'rock1', 'rock2'];\n            this.obstacles = [];\n            this.score = 0;\n        }\n    }, {\n        key: 'onReset',\n        value: function onReset() {\n            this.reset();\n            _EventManager2.default.fire(_Event2.default.RESET_SKIER);\n            // EventManager.fire(Event.RESET_RHINO);\n            _EventManager2.default.fire(_Event2.default.RESET_STORAGE);\n        }\n    }, {\n        key: 'onShowMenu',\n        value: function onShowMenu() {\n            $('.game-ui, .game-start-menu').show();\n        }\n    }, {\n        key: 'createCanvas',\n        value: function createCanvas() {\n            return $('<canvas></canvas>').attr('width', this.width * window.devicePixelRatio).attr('height', this.height * window.devicePixelRatio).css({\n                width: this.width + 'px',\n                height: this.height + 'px',\n                'z-index': '2 !important',\n                'position': 'relative'\n            });\n        }\n    }, {\n        key: 'onMenuPlay',\n        value: function onMenuPlay() {\n            _EventManager2.default.fire(_Event2.default.RESET_GAME);\n            $('.game-ui').hide();\n            $('canvas').remove();\n            $('.canvas-container').show();\n            // show game menu\n            var canvas = this.createCanvas();\n\n            $('body .canvas-container').append(canvas);\n\n            this.createContext(canvas);\n\n            _EventManager2.default.fire(_Event2.default.GAME_READY);\n        }\n    }, {\n        key: 'onReady',\n        value: function onReady() {\n            // Load assets and start the game\n            var that = this;\n            _AssetManager2.default.loadAssets().then(function () {\n                that.loadedAssets = _AssetManager2.default.loadedAssets;\n                _EventManager2.default.fire(_Event2.default.GAME_STARTED);\n            });\n        }\n    }, {\n        key: 'onStart',\n        value: function onStart() {\n            this.placeInitialObstacles();\n            _EventManager2.default.fire(_Event2.default.START_GAMELOOP);\n        }\n    }, {\n        key: 'saveGame',\n        value: function saveGame() {\n            // save game to localStorage\n            _Storage2.default.highscore.set(Math.round(this.score));\n            // store game state\n            _Storage2.default.game.set({ 'game': Game, 'skier': _Skier2.default });\n        }\n    }, {\n        key: 'onPaused',\n        value: function onPaused() {\n            this.state.paused = true;\n            _EventManager2.default.fire(_Event2.default.STOP_GAMELOOP);\n            // show menu\n            $('.canvas-container, .game-start-menu, .game-over-screen').hide();\n            $('.game-ui, .game-pause-menu').show();\n        }\n    }, {\n        key: 'onResumed',\n        value: function onResumed() {\n            $('.game-ui').hide();\n            $('.canvas-container').show();\n            this.state.paused = false;\n\n            var timeLeft = 3;\n            var timer = setInterval(function () {\n                $('.timer').show();\n                $('.timer').html(timeLeft);\n                if (timeLeft == 0) {\n                    clearInterval(timer);\n                    $('.timer').hide();\n                    _EventManager2.default.fire(_Event2.default.START_GAMELOOP);\n                }\n                timeLeft--;\n            }, 1000);\n        }\n    }, {\n        key: 'onGameOver',\n        value: function onGameOver() {\n            _EventManager2.default.fire(_Event2.default.STOP_GAMELOOP);\n            this.saveGame();\n            $('canvas').remove();\n            $('#score').html(this.score + \" metres\");\n            $('.game-start-menu, .game-pause-menu').hide();\n            $('.game-ui, .game-over-screen').show();\n            _EventManager2.default.fire(_Event2.default.RESET_GAME);\n        }\n    }, {\n        key: 'onQuit',\n        value: function onQuit() {\n            _EventManager2.default.fire(_Event2.default.STOP_GAMELOOP);\n            this.saveGame();\n            $('canvas').remove();\n            $('.game-pause-menu, .game-over-screen, .canvas-container').hide();\n            $('.game-start-menu').show();\n            _EventManager2.default.fire(_Event2.default.RESET_GAME);\n        }\n\n        /**\n         * Resets all state properties to their default false\n         * @return void\n         */\n\n    }, {\n        key: 'resetState',\n        value: function resetState() {\n            for (var state in this.state) {\n                this.state[state] = false;\n            }\n        }\n\n        /**\n         * Creates the Canvas Context\n         * @param {Canvas} canvas \n         * @return void\n         */\n\n    }, {\n        key: 'createContext',\n        value: function createContext(canvas) {\n            this.ctx = canvas[0].getContext('2d');\n        }\n\n        /**\n         * Clears everything drawn on the canvas\n         * @return void\n         */\n\n    }, {\n        key: 'clearCanvas',\n        value: function clearCanvas() {\n            this.ctx.clearRect(0, 0, this.width, this.height);\n        }\n\n        /**\n        * Randomly places initial obstacles on the map as game loads\n        * @return void\n        */\n\n    }, {\n        key: 'placeInitialObstacles',\n        value: function placeInitialObstacles() {\n            var numberObstacles = Math.ceil(_.random(5, 7) * (this.width / 800) * (this.height / 500));\n\n            var minX = -50;\n            var maxX = this.width + 50;\n            var minY = this.height / 2 + 100;\n            var maxY = this.height + 50;\n            var i = 0;\n\n            for (i = 0; i < numberObstacles; i++) {\n                this.placeRandomObstacle(minX, maxX, minY, maxY);\n            }\n\n            // console.log(loadedAssets.images)\n            var that = this;\n            this.obstacles = _.sortBy(this.obstacles, function (obstacle) {\n                var obstacleImage = that.loadedAssets.images[obstacle.type];\n                return obstacle.y + obstacleImage.height;\n            });\n        }\n\n        /**\n        * Calculates positions that are empty/open on the map\n        * @param {int} minX \n        * @param {int} maxX \n        * @param {int} minY \n        * @param {int} maxY \n        * @return {Object} Position of the object\n        */\n\n    }, {\n        key: 'calculateOpenPosition',\n        value: function calculateOpenPosition(minX, maxX, minY, maxY) {\n            try {\n                // console.log(\"minX: \" + minX + \", maxX: \" + maxX + \", minY:\" + minY +\", maxY: \"+ maxY);\n                var x = _.random(minX, maxX);\n                var y = _.random(minY, maxY);\n\n                var foundCollision = _.find(this.obstacles, function (obstacle) {\n                    return x > obstacle.x - 50 && x < obstacle.x + 50 && y > obstacle.y - 50 && y < obstacle.y + 50;\n                });\n\n                if (foundCollision) {\n                    return this.calculateOpenPosition(minX, maxX, minY, maxY);\n                } else {\n                    return {\n                        x: x,\n                        y: y\n                    };\n                }\n            } catch (e) {\n                // console.log(e);\n                return { x: 0, y: 0 };\n            }\n        }\n\n        /**\n         * Finds Open positions and places a new obstacle in those positions\n         * @param {int} minX \n         * @param {int} maxX \n         * @param {int} minY \n         * @param {itn} maxY \n         * @return void\n         */\n\n    }, {\n        key: 'placeRandomObstacle',\n        value: function placeRandomObstacle(minX, maxX, minY, maxY) {\n            var obstacleIndex = _.random(0, this.obstacleTypes.length - 1);\n\n            var position = this.calculateOpenPosition(minX, maxX, minY, maxY);\n\n            this.obstacles.push({\n                type: this.obstacleTypes[obstacleIndex],\n                x: position.x,\n                y: position.y\n            });\n        }\n\n        /**\n         * Place a single obstacle based on skier direction of movement\n         * Endless snow with obstacles illusion\n         * @param {Object} skier\n         * @return void\n         */\n\n    }, {\n        key: 'placeNewObstacle',\n        value: function placeNewObstacle(skier) {\n            var shouldPlaceObstacle = _.random(1, 8);\n\n            if (shouldPlaceObstacle !== 8) {\n                return;\n            }\n\n            var leftEdge = skier.mapX;\n            var rightEdge = skier.mapX + this.width;\n            var topEdge = skier.mapY;\n            var bottomEdge = skier.mapY + this.height;\n\n            switch (skier.direction) {\n                case 1:\n                    // left\n                    this.placeRandomObstacle(leftEdge - 50, leftEdge, topEdge, bottomEdge);\n                    break;\n                case 2:\n                    // left down\n                    this.placeRandomObstacle(leftEdge - 50, leftEdge, topEdge, bottomEdge);\n                    this.placeRandomObstacle(leftEdge, rightEdge, bottomEdge, bottomEdge + 50);\n                    break;\n                case 3:\n                    // down\n                    this.placeRandomObstacle(leftEdge, rightEdge, bottomEdge, bottomEdge + 50);\n                    break;\n                case 4:\n                    // right down\n                    this.placeRandomObstacle(rightEdge, rightEdge + 50, topEdge, bottomEdge);\n                    this.placeRandomObstacle(leftEdge, rightEdge, bottomEdge, bottomEdge + 50);\n                    break;\n                case 5:\n                    // right\n                    this.placeRandomObstacle(rightEdge, rightEdge + 50, topEdge, bottomEdge);\n                    break;\n                case 6:\n                    // up\n                    this.placeRandomObstacle(leftEdge, rightEdge, topEdge - 50, topEdge);\n                    break;\n            }\n        }\n\n        /**\n         * Draws obstacles\n         * @param {Object} skier \n         * @return void\n         */\n\n    }, {\n        key: 'drawObstacles',\n        value: function drawObstacles(skier) {\n            var newObstacles = [];\n\n            var that = this;\n            _.each(this.obstacles, function (obstacle) {\n                var obstacleImage = that.loadedAssets.images[obstacle.type];\n                var x = obstacle.x - skier.mapX - obstacleImage.width / 2;\n                var y = obstacle.y - skier.mapY - obstacleImage.height / 2;\n\n                if (x < -100 || x > that.width + 50 || y < -100 || y > that.height + 50) {\n                    return;\n                }\n\n                that.ctx.drawImage(obstacleImage, x, y, obstacleImage.width, obstacleImage.height);\n\n                newObstacles.push(obstacle);\n            });\n\n            this.obstacles = newObstacles;\n        }\n\n        // draw Player Object \n\n    }, {\n        key: 'drawGameObject',\n        value: function drawGameObject(skier) {\n            var skierAssetName = skier.getAsset();\n            var skierImage = this.loadedAssets.images[skierAssetName];\n            var x = (this.width - skierImage.width) / 2;\n            var y = (this.height - skierImage.height) / 2;\n\n            this.ctx.drawImage(skierImage, x, y, skierImage.width, skierImage.height);\n        }\n    }, {\n        key: 'drawHighScore',\n        value: function drawHighScore() {\n            this.ctx.font = \"30px Arial\";\n            this.ctx.fillStyle = \"#0095DD\";\n            this.ctx.fillText(\"Score: \" + Math.round(this.score) + \" metres\", 10, 35);\n        }\n    }, {\n        key: 'drawPauseText',\n        value: function drawPauseText() {\n            this.ctx.textAlignment = \"right\";\n            this.ctx.font = \"30px Arial\";\n            this.ctx.fillStyle = \"#B30D5D\";\n            this.ctx.fillText(\"Press P to pause\", 500, 35);\n        }\n    }]);\n\n    return Game;\n}();\n\nexports.default = Game;\n;\n\n//# sourceURL=webpack:///./js/Game.js?");

/***/ }),

/***/ "./js/Skier.js":
/*!*********************!*\
  !*** ./js/Skier.js ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = __webpack_require__(/*! ./utils */ \"./js/utils.js\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The player component\n */\nexports.default = {\n    direction: 5,\n    mapX: 0,\n    mapY: 0,\n    speed: 8,\n    isMoving: false,\n    hasCollided: false,\n    assets: ['skierCrash', 'skierLeft', 'skierLeftDown', 'skierDown', 'skierRightDown', 'skierRight'],\n\n    getAsset: function getAsset() {\n        return this.assets[this.direction];\n    },\n\n    /**\n     * Resets properties to default\n     * @return void\n     */\n    reset: function reset() {\n        this.direction = 5;\n        this.mapX = 0;\n        this.mapY = 0;\n        this.speed = 8;\n        this.isMoving = false;\n        this.hasCollided = false;\n    },\n\n    /**\n     * Moves the skier according to the direction and places new objects on the map\n     * @return void\n     */\n    move: function move() {\n        var dt = 1;\n        switch (this.direction) {\n            case 2:\n                this.mapX = _utils2.default.math.lerp(this.mapX, this.mapX - Math.round(this.speed / 1.4142), dt);\n                this.mapY = _utils2.default.math.lerp(this.mapY, this.mapY + Math.round(this.speed / 1.4142), dt);\n                break;\n            case 3:\n                this.mapY = _utils2.default.math.lerp(this.mapY, this.mapY + this.speed, dt);\n                break;\n            case 4:\n                this.mapX = _utils2.default.math.lerp(this.mapX, this.mapX + this.speed / 1.4142, dt);\n                this.mapY = _utils2.default.math.lerp(this.mapY, this.mapY + this.speed / 1.4142, dt);\n                break;\n\n        }\n    },\n\n    onMoveLeft: function onMoveLeft() {\n        if (this.direction === 0) this.direction = 1;else this.direction = 2;\n\n        this.mapX += this.speed;\n    },\n\n    onMoveRight: function onMoveRight() {\n        if (this.direction === 0) this.direction = 5;else this.direction = 4;\n\n        this.mapX += this.speed;\n    },\n\n    onMoveUp: function onMoveUp() {\n        // prevent moving backwards and ensuring speed is maintained\n        if (this.speed > 1) {\n            this.speed -= 0.5;\n            this.isMoving = false;\n            this.mapY += this.speed;\n        }\n    },\n\n    onMoveDown: function onMoveDown() {\n        // check speed, accelerate on decent\n        if (this.speed < 8) {\n            this.speed++;\n        }\n        this.direction = 3;\n        this.mapY += this.speed;\n    },\n\n    onJump: function onJump() {}\n\n};\n\n//# sourceURL=webpack:///./js/Skier.js?");

/***/ }),

/***/ "./js/Storage.js":
/*!***********************!*\
  !*** ./js/Storage.js ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _utils = __webpack_require__(/*! ./utils */ \"./js/utils.js\");\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Manages storage of game data\n */\nexports.default = {\n    // highscore stuff\n    highscore: {\n        set: function set(value) {\n            var highscore = this.get();\n            if (highscore == null) {\n                highscore = [];\n            }\n            highscore.push(value);\n            _utils2.default.setItem('ceros_highscore', JSON.stringify(highscore));\n        },\n        get: function get() {\n            return _utils2.default.toJson(_utils2.default.getItem('ceros_highscore'));\n        }\n    },\n    // game data\n    game: {\n        clear: function clear() {\n            _utils2.default.removeItem('ceros_game_data');\n        },\n        set: function set(data) {\n            _utils2.default.setItem('ceros_game_data)', JSON.stringify(data));\n        },\n        get: function get() {\n            return _utils2.default.toJson(_utils2.default.getItem('ceros_game_data'));\n        }\n    }\n};\n\n//# sourceURL=webpack:///./js/Storage.js?");

/***/ }),

/***/ "./js/main.js":
/*!********************!*\
  !*** ./js/main.js ***!
  \********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _Event = __webpack_require__(/*! ./Event */ \"./js/Event.js\");\n\nvar _Event2 = _interopRequireDefault(_Event);\n\nvar _EventManager = __webpack_require__(/*! ./EventManager */ \"./js/EventManager.js\");\n\nvar _EventManager2 = _interopRequireDefault(_EventManager);\n\nvar _Storage = __webpack_require__(/*! ./Storage */ \"./js/Storage.js\");\n\nvar _Storage2 = _interopRequireDefault(_Storage);\n\nvar _Game = __webpack_require__(/*! ./Game */ \"./js/Game.js\");\n\nvar _Game2 = _interopRequireDefault(_Game);\n\nvar _CollisionDetector = __webpack_require__(/*! ./CollisionDetector */ \"./js/CollisionDetector.js\");\n\nvar _CollisionDetector2 = _interopRequireDefault(_CollisionDetector);\n\nvar _Skier = __webpack_require__(/*! ./Skier */ \"./js/Skier.js\");\n\nvar _Skier2 = _interopRequireDefault(_Skier);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import Rhino from './Rhino';\n\n// Ensure compatibility across browsers\nvar requestAnimationFrame = function () {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback, element) {\n        window.setTimeout(callback, 1000 / 60);\n    };\n}();\n\n$(document).ready(function () {\n\n    var animFrame = null;\n\n    var game = new _Game2.default();\n\n    var onStartGameLoop = function onStartGameLoop() {\n        animFrame = requestAnimationFrame(gameLoop);\n    };\n\n    var onStopGameLoop = function onStopGameLoop() {\n        window.cancelAnimationFrame(animFrame);\n    };\n\n    var foundRamp = function foundRamp() {};\n\n    /**\n     * GameLoop\n     */\n    var gameLoop = function gameLoop() {\n        // save ctx\n        game.ctx.save();\n\n        // Retina support\n        game.ctx.scale(window.devicePixelRatio, window.devicePixelRatio);\n\n        // clear the canvas\n        game.clearCanvas();\n\n        // draw relevant stuff\n        _Skier2.default.move();\n\n        game.placeNewObstacle(_Skier2.default);\n\n        game.drawPauseText();\n\n        // draw highscore\n        game.drawHighScore();\n\n        // draw Skier\n        game.drawGameObject(_Skier2.default);\n\n        // drawGameObject(Rhino);\n\n        game.drawObstacles(_Skier2.default);\n\n        // check for collisions\n        _CollisionDetector2.default.checkIfSkierHitObstacle(game, _Skier2.default);\n        // CollisionDetector.checkIfSkierCapturedByEnemy(game, Skier, Rhino);\n\n        // restore ctx\n        game.ctx.restore();\n\n        // update game\n        if (animFrame != null && !game.state.paused) {\n            animFrame = requestAnimationFrame(gameLoop);\n        }\n    };\n\n    /**\n     * Game Event Listeners registration\n     */\n    var registerEvents = function registerEvents() {\n        _EventManager2.default.on(_Event2.default.RESET_GAME, game.onReset, game);\n        _EventManager2.default.on(_Event2.default.RESET_SKIER, _Skier2.default.reset, _Skier2.default);\n        // EventManager.on(Event.RESET_RHINO, Rhino.reset, Rhino);\n        _EventManager2.default.on(_Event2.default.RESET_STORAGE, _Storage2.default.game.clear, _Storage2.default);\n\n        _EventManager2.default.on(_Event2.default.START_GAMELOOP, onStartGameLoop, this);\n        _EventManager2.default.on(_Event2.default.STOP_GAMELOOP, onStopGameLoop, this);\n\n        _EventManager2.default.on(_Event2.default.SHOW_MENU, game.onShowMenu, game);\n        _EventManager2.default.on(_Event2.default.MENU_PLAY, game.onMenuPlay, game);\n\n        _EventManager2.default.on(_Event2.default.GAME_READY, game.onReady, game);\n        _EventManager2.default.on(_Event2.default.GAME_STARTED, game.onStart, game);\n        _EventManager2.default.on(_Event2.default.GAME_PAUSED, game.onPaused, game);\n        _EventManager2.default.on(_Event2.default.GAME_RESUMED, game.onResumed, game);\n        _EventManager2.default.on(_Event2.default.GAME_OVER, game.onGameOver, game);\n        _EventManager2.default.on(_Event2.default.GAME_QUIT, game.onQuit, game);\n        _EventManager2.default.on(_Event2.default.FOUND_RAMP, foundRamp, this);\n        _EventManager2.default.on(_Event2.default.PLAYER_JUMP, _Skier2.default.onJump, _Skier2.default);\n\n        _EventManager2.default.on(_Event2.default.KEY_LEFT, _Skier2.default.onMoveLeft, _Skier2.default);\n        _EventManager2.default.on(_Event2.default.KEY_RIGHT, _Skier2.default.onMoveRight, _Skier2.default);\n        _EventManager2.default.on(_Event2.default.KEY_DOWN, _Skier2.default.onMoveDown, _Skier2.default);\n        _EventManager2.default.on(_Event2.default.KEY_UP, _Skier2.default.onMoveUp, _Skier2.default);\n    };\n\n    /**\n     *  DOM Event listeners\n    */\n    // Play/New Game\n    $('.play').on('click', function (e) {\n        _EventManager2.default.fire(_Event2.default.MENU_PLAY);\n    });\n\n    // Resume Game\n    $('#resume').on('click', function (e) {\n        _EventManager2.default.fire(_Event2.default.GAME_RESUMED);\n    });\n\n    // Pause Game\n    $('.pause').on('click', function (e) {\n        e.preventDefault();\n        _EventManager2.default.fire(_Event2.default.GAME_PAUSED);\n    });\n\n    // Quit game\n    $(\"#quit\").on('click', function (e) {\n        _EventManager2.default.fire(_Event2.default.GAME_QUIT);\n    });\n\n    // Go Back to Main Menu\n    $('.back').on('click', function (e) {\n        $('.highscore-screen,.game-over-screen').hide();\n        $('.game-start-menu').show();\n    });\n\n    // View High Scores\n    $('#highscore').on('click', function (e) {\n        $('.game-start-menu').hide();\n        var highscores = _Storage2.default.highscore.get();\n        console.log(highscores);\n        if (highscores != undefined || highscores != null) {\n            $('#highscores li').remove();\n            highscores.sort(function (a, b) {\n                return b - a;\n            }).forEach(function (highscore) {\n                $('#highscores').append('<li> ' + highscore + ' metres</li>');\n            });\n        }\n        $('.highscore-screen').show();\n    });\n\n    /**\n     * Checks for keyboard onKeyDown events\n     * @param {int} update \n     * @return void\n     */\n    var setupKeyHandler = function setupKeyHandler() {\n        $(document).keydown(function (event) {\n\n            _Skier2.default.isMoving = true;\n\n            event.preventDefault();\n\n            switch (event.which) {\n                case 37:\n                    // left\n                    _EventManager2.default.fire(_Event2.default.KEY_LEFT);\n                    break;\n                case 39:\n                    // right\n                    _EventManager2.default.fire(_Event2.default.KEY_RIGHT);\n                    break;\n                case 38:\n                    // up\n                    _EventManager2.default.fire(_Event2.default.KEY_UP);\n                    break;\n                case 40:\n                    // down\n                    _EventManager2.default.fire(_Event2.default.KEY_DOWN);\n                    break;\n                case 80:\n                    if (!game.state.pause) {\n                        _EventManager2.default.fire(_Event2.default.GAME_PAUSED);\n                    }\n                    break;\n                case 32:\n                    _EventManager2.default.fire(_Event2.default.PLAYER_JUMP);\n                    break;\n            }\n        });\n    };\n\n    /**\n     * Setup the game\n     */\n    var setup = function setup() {\n        registerEvents();\n        _EventManager2.default.fire(_Event2.default.SHOW_MENU);\n        setupKeyHandler();\n    };\n\n    setup();\n});\n\n//# sourceURL=webpack:///./js/main.js?");

/***/ }),

/***/ "./js/utils.js":
/*!*********************!*\
  !*** ./js/utils.js ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = {\n    toString: function toString(data) {\n        return (typeof data === \"undefined\" ? \"undefined\" : _typeof(data)) === Object ? JSON.stringify(data) : new Error('Parameter passed is not a JSON object');\n    },\n\n    toJson: function toJson(data) {\n        return typeof data === \"string\" ? JSON.parse(data) : null;\n    },\n\n    setItem: function setItem(key, value) {\n        if (window && window.localStorage || window.sessionStorage) {\n            window.sessionStorage.setItem(key, value) || window.localStorage.setItem(key, value);\n        }\n    },\n\n    getItem: function getItem(key) {\n        var data = null;\n        if (window && window.localStorage || window.sessionStorage) {\n            data = window.sessionStorage.getItem(key) || window.localStorage.getItem(key);\n        }\n        return data;\n    },\n\n    removeItem: function removeItem(key) {\n        if (window && window.localStorage || window.sessionStorage) {\n            window.sessionStorage.removeItem(key) || window.localStorage.removeItem(key);\n        }\n    },\n\n    clearAll: function clearAll() {\n        if (window && window.localStorage || window.sessionStorage) {\n            window.sessionStorage.clear() || window.localStorage.clear();\n        }\n    },\n\n    getCollisionRect: function getCollisionRect(game, gameObj) {\n        var AssetName = gameObj.getAsset();\n        var gameObjImage = game.loadedAssets.images[AssetName];\n        var collisionRect = {\n            left: gameObj.mapX + game.width / 2,\n            right: gameObj.mapX + gameObjImage.width + game.width / 2,\n            top: gameObj.mapY + gameObjImage.height - 5 + game.height / 2,\n            bottom: gameObj.mapY + gameObjImage.height + game.height / 2\n        };\n\n        return collisionRect;\n    },\n\n    math: {\n        /**\n        * Linear Interpolation\n        * @param {int} current \n        * @param {int} goal \n        * @param {int} dt \n        */\n        lerp: function lerp(current, goal, dt) {\n            return current + (goal - current) * dt;\n        }\n    }\n};\n\n//# sourceURL=webpack:///./js/utils.js?");

/***/ })

/******/ });